# Kernel Policy List
# This file contains policies defined by the kernel itself.
# These policies are read-only and cannot be modified by developers.
# They provide core governance rules that ensure system safety and reliability.

# Policy checkers validate execution constraints before instruction execution
policy_checkers:
  # Prevent skipping from GENERATE directly to TOOL_CALL
  - type: HistoryPolicyChecker
    name: no_skip_to_execute
    bad_sequence: [GENERATE, TOOL_CALL]
  
  # Prevent direct generate->toolcall without proper flow
  - type: HistoryPolicyChecker
    name: no_direct_toolcall
    bad_sequence: [GENERATE, TOOL_CALL]

# Policy routers dynamically route execution flow based on conditions
policy_routers:
  # Example: Route to retry when confidence is low
  # - type: MetricThresholdPolicyRouter
  #   name: retry_on_low_confidence
  #   key: confidence
  #   threshold: 0.5
  #   target: regenerate

# Graph structure checkers validate graph structure before execution
graph_structure_checkers:
  # Multiple blacklist rules for graph structure validation
  - type: GraphStructurePolicyChecker
    blacklists:
      - name: no_direct_execute_without_reason
        sequence: [TOOL_CALL, TOOL_CALL]
        level: error
      - name: no_skip_to_execute
        sequence: [GENERATE, TOOL_CALL]
        level: error
      - name: multiple_generate_in_a_row
        sequence: [GENERATE, GENERATE]
        level: warning
      - name: no_direct_toolcall
        sequence: [GENERATE, TOOL_CALL]
        level: error

